/*! ngHttpPool 2013-10-10 */
!function(){"use strict";var a=angular.module("ngHttpPool",[]),b=function(a,b){return function(){var c=[];for(var d in arguments)c.push(arguments[d]);a.apply(b,c)}},c=function(a,b,c){this.$http_=a,this.$q_=b,this.total_=c,this.processes_=[],this.queue_=[]};c.prototype={listen:function(){this.listenRequests_=[]},map:function(a,b,c){var d;this.listenRequests_&&(d=this.$q_.defer(),this.listenRequests_.push(d.promise)),this.queue_.push({params:a,success:b,error:c,deferred:d}),this.runNext_()},getPromise:function(){var a=this.$q_.all(this.listenRequests_);return this.listenRequests_=null,a},runNext_:function(){if(this.total_-this.processes_.length>0){var a=this.queue_.shift();if(!a)return;this.processes_.push(a);var c=this.$http_(a.params);if(a.deferred){var d=a.deferred;this.configurePromise_(c,d)}a.success&&c.success(a.success),a.error&&c.error(a.error),c.success(b(this.processComplete_,this)),c.error(b(this.processComplete_,this))}},configurePromise_:function(a,b){var c=function(a,b,c,d){return{data:a,status:b,headers:c,config:d}};a.success(function(a,d,e,f){b.resolve(c(a,d,e,f))}),a.error(function(a,d,e,f){b.reject(c(a,d,e,f))})},processComplete_:function(){this.processes_.shift(),this.runNext_()}},a.factory("httpPool",["$http","$q",function(a,b){return{create:function(d){return new c(a,b,d)}}}])}();